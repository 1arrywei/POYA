@model IEnumerable<POYA.Areas.WeEduHub.Models.WeArticle>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var SetId=ViewData["SetId"]?.ToString()??string.Empty;
    var _UserId=ViewData["UserId"]?.ToString()??string.Empty;
}

<h4>@(Localizer["Articles and videos"])</h4>

<div class="row">
    <div class="col col-12">
        @if(SetId==string.Empty)
        {
            <a asp-action="Index" asp-controller="WeArticleSet" class="btn btn-outline-info float-right">@(Localizer["My sets"]) &raquo;</a>
        }
        else
        {
            <a asp-action="Create" asp-controller="WeArticle" asp-route-SetId="@(SetId)" class="btn btn-outline-info float-right">@(Localizer["Add"]) &raquo;</a>
        }
        @if(SetId!=string.Empty)
        {
            <a id="go_back" class="btn btn-info">&laquo; @(Localizer["Back"])</a> 
        }
    </div>
</div>

<div class="row">
    <div class="col col-10">
        <table class="table wearticles_table">
            <tbody>
                @foreach (var item in ViewData["WeArticles"] as IPagedList<WeArticle>) 
                {
                    <tr>
                        <td>
                            <a class="wearticle_details" asp-action="Details" asp-route-id="@item.Id">@(item.Title)</a> 
                            @if((DateTimeOffset.Now-item.DOPublishing).Days<1)
                            {
                                <sup>
                                    <span class="badge badge-success">@(Localizer["Newest"])</span>
                                </sup>
                            }
                            @if(item.AuthorUserId==_UserId)
                            {
                                <a class="wearticle_edit"  asp-action="Edit" asp-route-id="@item.Id">@(Html.Raw("\u2712\ufe0f"))</a>    
                                <a class="wearticle_delete"  asp-action="Delete" asp-route-id="@item.Id">@(Html.Raw("\u274c"))</a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="paged_list">
    @(Html.PagedListPager((IPagedList)ViewData["WeArticles"], Apage => Url.Action("Index", new { Apage = Apage,SetId=SetId }),PagedListRenderOptions.ClassicPlusFirstAndLast))
</div>


@section Scripts
{
    <script>

    </script>
}

@section Styles
{
    <style>
        td{
            border: 0px solid transparent !important;
        }
        .paged_list{
            text-align:center;
        }
        .wearticle_details{
            font-size: 190%;
            text-decoration: none;
            word-break: break-all;
            word-wrap: break-word;
        }
        .wearticle_details:hover{
            text-decoration: none;
            color: violet;
        }
        #go_back{
            position: fixed;
            bottom: 8%;
            z-index: 99;
        }
        table *{
            border-color: transparent;
        }
    </style>
}
